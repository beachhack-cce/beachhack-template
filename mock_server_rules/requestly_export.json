{
    "rules": [
        {
            "ruleType": "ModifyResponse",
            "status": "Active",
            "name": "Maintenance Agent Retrieval Mock",
            "description": "Dynamic mock that returns maintenance advice based on the decision in the request body.",
            "url": "http://dummy.local/retrieve",
            "method": "POST",
            "modification": {
                "type": "code",
                "value": "function modifyResponse(args) {\n    const { body } = args.request;\n    \n    let decision = \"UNKNOWN\";\n    try {\n        decision = JSON.parse(body).decision;\n    } catch (e) { \n        return { error: \"Invalid JSON body\" };\n    }\n\n    const knowledgeBase = {\n      \"EARLY_BEARING_DEGRADATION\": {\n        \"results\": [{\n          \"id\": \"chunk_01\",\n          \"decision\": \"EARLY_BEARING_DEGRADATION\",\n          \"text\": \"Early bearing degradation requires inspection of bearing housing, lubrication check, alignment verification, and preventive maintenance within 5â€“10 operating days.\",\n          \"urgency\": \"Medium\",\n          \"source\": \"Predictive Maintenance Knowledge Base.pdf\"\n        }]\n      },\n      \"VIBRATION_ONLY\": {\n        \"results\": [{\n          \"id\": \"chunk_02\",\n          \"decision\": \"VIBRATION_ONLY\",\n          \"text\": \"Sustained vibration without temperature rise may indicate imbalance or loose mounting. Immediate shutdown is not required. Inspect mounting bolts, base, and verify shaft alignment.\",\n          \"urgency\": \"Low\",\n          \"source\": \"Predictive Maintenance Knowledge Base.pdf\"\n        }]\n      },\n      \"VIBRATION_AND_TEMPERATURE\": {\n        \"results\": [{\n          \"id\": \"chunk_03\",\n          \"decision\": \"VIBRATION_AND_TEMPERATURE\",\n          \"text\": \"Combined vibration and temperature increase indicates confirmed mechanical degradation. Schedule maintenance during planned downtime. Prepare spare components if available.\",\n          \"urgency\": \"Medium\",\n          \"source\": \"Predictive Maintenance Knowledge Base.pdf\"\n        }]\n      },\n      \"TEMPERATURE_ONLY\": {\n        \"results\": [{\n          \"id\": \"chunk_04\",\n          \"decision\": \"TEMPERATURE_ONLY\",\n          \"text\": \"Gradual temperature rise without vibration may indicate lubrication degradation or cooling inefficiency. Inspect lubrication pathways, verify cooling airflow, and check temperature sensor calibration.\",\n          \"urgency\": \"Medium\",\n          \"source\": \"Predictive Maintenance Knowledge Base.pdf\"\n        }]\n      },\n      \"RECIP_COMPRESSOR_EARLY\": {\n        \"results\": [{\n          \"id\": \"chunk_05\",\n          \"decision\": \"RECIP_COMPRESSOR_EARLY\",\n          \"text\": \"Irregular vibration and moderate temperature rise in reciprocating compressors requires inspection of piston and bearing assemblies, lubrication flow verification, and valve clearance inspection.\",\n          \"urgency\": \"Medium\",\n          \"source\": \"Predictive Maintenance Knowledge Base.pdf\"\n        }]\n      },\n      \"SENSOR_INCONSISTENCY\": {\n        \"results\": [{\n          \"id\": \"chunk_06\",\n          \"decision\": \"SENSOR_INCONSISTENCY\",\n          \"text\": \"Sudden step changes or conflicting signals suggests sensor error. Validate sensor readings and cross-check with secondary sensors. Do not escalate maintenance prematurely.\",\n          \"urgency\": \"Low\",\n          \"source\": \"Predictive Maintenance Knowledge Base.pdf\"\n        }]\n      },\n      \"CONFIRMED_PROGRESSION\": {\n        \"results\": [{\n          \"id\": \"chunk_07\",\n          \"decision\": \"CONFIRMED_PROGRESSION\",\n          \"text\": \"Confirmed progression of degradation requires component replacement. Immediate intervention may be necessary if trend accelerates.\",\n          \"urgency\": \"High\",\n          \"source\": \"Predictive Maintenance Knowledge Base.pdf\"\n        }]\n      },\n      \"GLOBAL_SAFETY\": {\n        \"results\": [{\n          \"id\": \"chunk_08\",\n          \"decision\": \"GLOBAL_SAFETY\",\n          \"text\": \"Before any inspection or maintenance activity, ensure power isolation, lock-out/tag-out procedures, and appropriate PPE usage.\",\n          \"urgency\": \"High\",\n          \"source\": \"Predictive Maintenance Knowledge Base.pdf\"\n        }]\n      }\n    };\n\n    return knowledgeBase[decision] || { results: [], error: \"Decision not found: \" + decision };\n}"
            }
        }
    ]
}